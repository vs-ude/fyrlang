language: go
os: linux
dist: bionic

go:
  - stable

env:
  - TEST_SUITE=go
  - TEST_SUITE=fyr CC=gcc
  - TEST_SUITE=fyr CC=clang

before_install:
  - if [ $TEST_SUITE = fyr ]; then sudo apt update && sudo apt install valgrind; fi

script:
  - make
  - make SLOW_TESTS=y test_${TEST_SUITE}
