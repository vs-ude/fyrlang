language: go
dist: bionic

go:
  - stable
  - master
  - "1.11"
  - "1.10"

stages:
  - build
  - test

jobs:
  include:
    - stage: build
      script: make
      name: "Build the Compiler"
    - stage: test
      name: "Unit Tests"
      script: make test_go
    - name: "Integration Tests"
      install: sudo apt install valgrind
      script: make test_fyr
      env: SLOW_TESTS=y
